let axios,get;_05f‍.w("axios",[["default",["axios"],function(v){axios=v}]]);_05f‍.w("browser-sync",[["get",["get"],function(v){get=v}]]);


function generateTitle() {
    let section = document.createElement('section');
    section.classList.add('section');

    let content = document.createElement('div');
    content.classList.add('content', 'has-text-centered');
    section.append(content);

    let title = document.createElement('h1');
    title.classList.add('title');
    title.textContent = 'User Generated Playlists';
    content.append(title);

    return section;
}

async function getPlaylistFeed() {
    try {
        const result = await axios({
            method: 'get',
            url: 'http://localhost:3030/playlists/all',
        });
        return result.data;
    } catch (error) {
        return 'Could not get playlist feed'
    }
}

async function generatePlaylists() {
    try {
        let feed = await getPlaylistFeed();
        _05f‍.g.console.log(feed);
        let section = document.createElement('section');
        section.classList.add('section');
    
        let container = document.createElement('div');
        container.classList.add('container');
        section.append(container);
    
        //Generate 2 rows of 5
        generateTiles(container);
    
        return section;
    } catch (error) {
        return error;
    }
}
function generateTiles(container) {
    for (let i = 0; i < 2; i++) {
        var ancestor = document.createElement('div');
        ancestor.classList.add('tile', 'is-ancestor');
        container.append(ancestor);
        for (let j = 0; j < 5; j++) {
            var parent = document.createElement('div');
            parent.classList.add('tile', 'is-parent');
            ancestor.append(parent);

            var child = document.createElement('article');
            child.classList.add('tile', 'is-child', 'box');
            parent.append(child);

            var title = document.createElement('p');
            title.classList.add('title');
            title.textContent = '.display_name'
            child.append(title);

            var subtitle = document.createElement('p');
            subtitle.classList.add('subtitle');
            subtitle.textContent = '.id'
            child.append(subtitle);

            //bottom columns
            var columns = document.createElement('div');
            columns.classList.add('columns');
            child.append(columns);

            var column = document.createElement('div');
            column.classList.add('column');
            columns.append(column);

            var content = document.createElement('div');
            content.classList.add('content');
            column.append(content);

            var p = document.createElement('p');
            p.innerText = 'Track 1 \n Track 2 \n Track 3'
            content.append(p);

            var column = document.createElement('div');
            column.classList.add('column', 'has-text-right');
            columns.append(column);

            var content = document.createElement('div');
            content.classList.add('content');
            column.append(content);

            var p = document.createElement('p');
            p.innerText = 'Track 4 \n Track 5'
            content.append(p);
        }
    }
    return ancestor;
}
function buildPage() {
    const $root = $('#root');
    $root.append(generateTitle());
    $root.append(generatePlaylists());
}
generatePlaylists();
/*
$(function() {
    buildPage();
});
*/